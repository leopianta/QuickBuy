<h1 class="h4 titulo mb-4">Cadastro de Produto</h1>
<label for="inputNome" class="sr-only">Nome</label>
<input type="text" id="inputNome"
                   name="nomeProduto"
                   class="form-control form-produto mb-2 col-md-4"
                   [ngClass] = "{
                    'is-invalid':nome.invalid && (nome.dirty || nome.touched),
                    'is-valid':nome.valid && (nome.dirty || nome.touched)
                    }"
                   placeholder="Nome do produto"
                   [(ngModel)]="produto.nome"
                   #nome="ngModel"
                   required/>

<div class="invalid-feedback mb-2" *ngIf="nome.invalid && (nome.dirty || nome.touched)">
    <div *ngIf="nome.errors.required">
        Nome do produto é de preenchimento obrigatório!
    </div>
</div>                   

<label for="inputDescricao" class="sr-only">Descrição</label>
<input type="text" id="inputDescricao"
                   name="descricaoProduto"
                   class="form-control form-produto mb-2 col-md-4"
                   [ngClass] = "{
                    'is-invalid':descricao.invalid && (descricao.dirty || descricao.touched),
                    'is-valid':descricao.valid && (descricao.dirty || descricao.touched)
                    }"
                   placeholder="Descrição do produto"
                   [(ngModel)]="produto.descricao"
                   #descricao="ngModel"
                   required/>  

<div class="invalid-feedback mb-2" *ngIf="descricao.invalid && (descricao.dirty || descricao.touched)">
    <div *ngIf="descricao.errors.required">
        Descricao do produto é de preenchimento obrigatório!
    </div>
</div>                       

<label for="inputPreco" class="sr-only">Preço</label>                   
<input type="number" id="inputPreco"
                   name="precoProduto"
                   class="form-control form-produto mb-2 col-md-2"
                   [ngClass] = "{
                    'is-invalid':preco.invalid && (preco.dirty || preco.touched),
                    'is-valid':preco.valid && (preco.dirty || preco.touched)
                    }"
                   placeholder="Preço"
                   [(ngModel)]="produto.preco"
                   #preco="ngModel"
                   required/> 

<div class="invalid-feedback mb-2" *ngIf="preco.invalid && (preco.dirty || preco.touched)">
    <div *ngIf="preco.errors.required">
        Preço do produto é de preenchimento obrigatório!
    </div>
</div>                       

<div class="input-group mb-2">
    <div class="custom-file col-md-4">
        <input type="file" class="custom-file-input" id="inputFile" (change) = "inputChange($event.target.files)" />
        <label for="inputFile" class="custom-file-label" >{{fileName}}</label> 
        <span id='file-name'></span>          
    </div>                   
    <label class="col-md-1 ml-2" href="#">
        <span class="spinner-border text-primary" role="status" aria-hidden="true" *ngIf="ativar_spinner_file"></span>        
    </label>
</div>   

<div class="alert alert-success col-md-4" *ngIf="arquivoEnviado">
    <div>
        <button type="button" class="close close-success-modal" data-dismiss="modal" aria-label="Close" (click)="fecharMsgArquivo(arquivoEnviado)">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    Arquivo enviado com sucesso!
</div>

<div class="alert alert-danger col-md-6" *ngIf="mensagemArquivo">
    <div>
        <button type="button" class="close close-danger-modal" data-dismiss="modal" aria-label="Close" (click)="fecharMsgArquivo()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {{mensagemArquivo}}
</div>

        <button class="btn btn-primary col-md-1 mb-2" style = "margin-right: 1em;" type="submit" (click)="cadastrar()" [disabled]="ativar_spinner">
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" *ngIf="ativar_spinner"></span>
            <svg *ngIf="!ativar_spinner" class="bi bi-check" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M13.854 3.646a.5.5 0 010 .708l-7 7a.5.5 0 01-.708 0l-3.5-3.5a.5.5 0 11.708-.708L6.5 10.293l6.646-6.647a.5.5 0 01.708 0z" clip-rule="evenodd"/>
            </svg>
            Salvar
        </button>
        
        <button class="btn btn-danger col-md-1 mb-2" type="submit" [routerLink]="['/home-produto']">
            <!-- <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" *ngIf="ativar_spinner"></span> -->
            <!-- <svg class="bi bi-x" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 010 .708l-7 7a.5.5 0 01-.708-.708l7-7a.5.5 0 01.708 0z" clip-rule="evenodd"/>
                <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 000 .708l7 7a.5.5 0 00.708-.708l-7-7a.5.5 0 00-.708 0z" clip-rule="evenodd"/>
            </svg> -->
            Cancelar
        </button>

<div class="alert alert-danger col-md-4" *ngIf="mensagem">
    <div>
        <button type="button" class="close close-danger-modal" data-dismiss="modal" aria-label="Close" (click)="fecharMsgCadastro()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {{mensagem}}
</div>

<div class="alert alert-success col-md-4" *ngIf="produtoCadastrado">
    <div>
        <button type="button" class="close close-success-modal" data-dismiss="modal" aria-label="Close" (click)="fecharMsgCadastro(produtoCadastrado)">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    Produto cadastrado com sucesso!
</div>